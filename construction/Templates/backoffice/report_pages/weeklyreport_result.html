
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
</head>
<body>
    <a href="{% url 'weeklyreport'%}" class="btn btn-outline-secondary mt-3 ml-3" >Go Back</a>
    <button class="btn btn-outline-primary mt-3 ml-3" id="pdf">Generate a PDF</button>
    <div id="content" style="background-color: white;">
    
        <div class="col-md-10 mx-auto mb-5">
            <h3 class="text-center font-weight-bold table-title">STATUS REPORT</h3>
            <table class="table table-bordered ">
                <thead>
                    <tr>
                        <th class="w-50">
                            <table class="table-borderless">
                                <td>PERIOD</td>
                            </table>
                        </th>
                        <th class="w-50">
                            <table class="col-md-12 table-borderless">
                                <td>From: </strong>{{datefrom|date:"F d, Y"}}</td>
                                <td>To: </strong> {{dateto|date:"F d, Y"}}</td>
                            </table>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="pl-4"><h5 >PROJECT SITE</h5></td>
                        <td class="pl-4"><h5>{{data.projectsite}}</h5></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="col-md-10 mx-auto mb-5">
            <h3 class="text-center font-weight-bold table-title">SITE PHOTOS</h3>
            <table class="table table-borderless">
                <thead>
                </thead>
                <tbody>
                    {% if sitephotosdetails%}
                        {% for i in sitephotosdetails%}
                        <tr>
                            <td class="text-center">
                                <img id="sitephotosdetails" src="{{i.image.url}}" alt="" style="width: auto; height: auto; border-radius: 0;">
                            </td>
                        </tr>
                        {% endfor %}
                    {% else %}
                    <tr>
                        <td class="text-center">No Data Available on this date</td>
                    </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>

        <div class="col-md-10 mx-auto table-responsive mb-5">
            <h3 class="text-center font-weight-bold table-title">ISSUES ON SITE</h3>
            <table class="table table-bordered">
                <thead class="thead" id="head_tbl"></thead>
                <tbody>
                    {% if projectissues %}
                    {% for i in projectissues %}
                        <tr>
                            <td class="text-center">{{i.description}}</td>
                        </tr>
                    {% endfor %}
                    {% else %}
                    <tr>
                        <td class="text-center">No Data Available on this date</td>
                    </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>

        <div class="col-md-10 mx-auto table-responsive mb-5">
            <h3 class="text-center font-weight-bold table-title">JOB ORDER</h3>
            <table class="table table-bordered">
                <thead class="thead" id="head_tbl">
                    <th class="font-weight-bold" style="width: 150px;">Personnel</th>
                    <th class="font-weight-bold">Activity</th>
                    <th class="font-weight-bold" style="min-width: 250px;">Remarks</th>
                    <th class="font-weight-bold">From</th>
                    <th class="font-weight-bold">To</th>
                    <th class="font-weight-bold">Status</th>
                    <th class="font-weight-bold" style="width: 150px;">Completion Date</th>
                </thead>
                <tbody>
                    {% if jobordertask%}
                        {% for i in jobordertask %}
                            <tr>
                                <td>{{i.personnel}}</td>
                                <td>{{i.activity}}</td>
                                <td>{{i.remarks}}</td>
                                <td>{{i.date}}</td>
                                <td>{{i.date2}}</td>
                                <td>{{i.status}}</td>
                                <td>{{i.completion_date}}</td>
                            </tr>
                        {% endfor %}
                    {% else %}
                    <tr>
                        <td colspan="7" class="text-center">No Data Available on this date</td>
                    </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>

        <div class="col-md-10 mx-auto mb-5">
            <h3 class="text-center font-weight-bold table-title">REQUEST FOR THE WEEK</h3>
            <table class="table table-bordered">
                <thead class="thead" id="head_tbl">
                    <tr>
                        <th class="text-center">Quantity</th>
                        <th class="text-center">Unit</th>
                        <th class="text-center">Articles</th>
                        <th class="text-center">Date Requested</th>
                        <th class="text-center">Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% if requisitiondetails%}
                        {% for i in requisitiondetails %}
                        <tr>
                            <td class="text-center">{{i.quantity}}</td>
                            <td class="text-center">{{i.articles.unit}}</td>
                            <td>{{i.articles}}</td>
                            <td class="text-center">{{i.requisition.date}}</td>
                            {% if i.status2 != None %}
                            <td class="text-center">{{i.status2}}</td>
                            {% else %}
                            <td class="text-center">{{i.status}}</td>
                            {% endif %}
                        </tr>
                        {% endfor %}
                    {% else %}
                    <tr>
                        <td colspan="4" class="text-center">No Data Available on this date</td>
                    </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
       
    
    
</div>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.debug.js"></script>
<script>
    $('#pdf').click(function() {
        var options = {
        };
        var pdf = new jsPDF('p', 'pt', 'a4');
        pdf.addHTML($("#content"), 15, 15, options, function() {
            pdf.save('report.pdf');
        });
    });
</script>
</body>
</html>